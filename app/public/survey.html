<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/reset.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css?family=Lato|Sonsie+One" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <title>Survey</title>

</head>

<body class="survey-background">

    <div class="container survey-container">

        <div class="row">
            <div class="col-sm-12">
                <h1 class="survey-header">Survey Questions</h1>
            </div>
        </div>

        <hr class="my-4">

        <div class="row">
            <div class="col-sm-12">
                <h2>About You</h2>
            </div>
        </div>

        <form>

            <div class="form-group">
                <label for="name">Name (Required)</label>
                <input type="text" class="form-control input" id="name" autocomplete="off">
            </div>

            <div class="form-group">
                <label for="photo">Link to Photo Image (Required)</label>
                <input type="text" class="form-control input" id="photo" autocomplete="off">
            </div>

        <br>

        <h4>Question 1</h4>
        <p>Music and art should be more valued in education.</p>
            
        <form>
            <select class="answerSelect" id="q1">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>

        <br>

        <h4>Question 2</h4>
        <p>Spending time at the beach is fun.</p>

        <form>
            <select class="answerSelect" id="q2">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>
    
        <br>

        <h4>Question 3</h4>
        <p>Animals deserve as much compassion as humans.</p>

        <form>
            <select class="answerSelect" id="q3">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>

        <br>

        <h4>Question 4</h4>
        <p>People with very different political views and values can get along.</p>
            
        <form>
            <select class="answerSelect" id="q1">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>

        <br>

        <h4>Question 5</h4>
        <p>Being the center of attention is enjoyable.</p>

        <form>
            <select class="answerSelect" id="q2">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>
    
        <br>

        <h4>Question 6</h4>
        <p>It is extremely important to vote in elections.</p>

        <form>
            <select class="answerSelect" id="q3">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>

        <br>


        <h4>Question 7</h4>
        <p>Losing competitions makes me angry.</p>
            
        <form>
            <select class="answerSelect" id="q1">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>

        <br>

        <h4>Question 8</h4>
        <p>It is sometimes okay to hold a grudge.</p>

        <form>
            <select class="answerSelect" id="q2">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>
    
        <br>

        <h4>Question 9</h4>
        <p>Family should always be forgiven no matter the circumstances</p>

        <form>
            <select class="answerSelect" id="q3">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>

        <br>
        
        <h4>Question 10</h4>
        <p>I feel people get offended too easily.</p>

        <form>
            <select class="answerSelect" id="q3">
                <option selected="selected" value="">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </form>

        <br>

        <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#best-friend-modal" id="submit-survey">Submit</button>

        <div id="best-friend-modal" class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-header">
                        <h4 class="modal-title">Best Match</h4>
                    </div>

                    <div class="modal-body">
                        <h2 id="best-friend-name"></h2>
                        <img id="best-friend-photo" src="#">
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-default close-button" data-dismiss="modal">Close</button>
                    </div>

                </div>
            </div>

        </div>

    </div>

</body>

<script type="text/javascript">

    
    function getScoresArr() {

        var scoresArr = [];

        $(".answerSelect").each(function() {
            scoresArr.push($(this).val());

        });

        console.log(scoresArr);

        return scoresArr;

    }

    $("#submit-survey").on("click", function(event){

        event.preventDefault();

        var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: getScoresArr(),
        };

        console.log(newFriend); 

        var currentURL = window.location.origin;

        $.post(currentURL + "/api/survey", newFriend, function(data) {
            
            $("#best-friend-name").text(data.name);
            $("#best-friend-photo").attr("src", data.photo);
            $("#best-friend-modal").modal();

            $("#name").val("");
            $("#photo").val("");
            $(".answerSelect").val("")



        });


    });

    $(".close-button").on("click", function(event){

        $("#best-friend-modal").modal("hide");

    });


</script>

</html>
